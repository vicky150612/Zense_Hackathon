<!DOCTYPE html>
<html>

<head>
    <title>Lost and Found</title>
    <style>
        /* Modal styling */
        #postLostFoundModal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.4);
        }

        .modal-content {
            background-color: #fefefe;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 500px;
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close:hover,
        .close:focus {
            color: black;
            text-decoration: none;
        }

        .item-card {
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 15px;
            margin: 10px 0;
            background-color: #f9f9f9;
        }

        .item-image {
            max-width: 200px;
            max-height: 200px;
            margin-bottom: 10px;
        }
    </style>
</head>

<body>
    <h1>Lost and Found</h1>
    <button onclick="showLostFoundModal()">Post an Item</button><br>

    <!-- Modal for posting a new item -->
    <div id="postLostFoundModal">
        <div class="modal-content">
            <span class="close" onclick="hideLostFoundModal()">Ã—</span>
            <h2>Post Lost and Found</h2>
            <form method="POST" action="/create_lost_item" enctype="multipart/form-data">
                <label for="item_photo">Photo:</label>
                <input type="file" id="item_photo" name="item_photo" accept="image/png, image/jpeg" required><br>
                <label for="place_found">Place Found:</label>
                <input type="text" id="place_found" name="place_found" required><br>
                <label for="collect">Place to Collect:</label>
                <input type="text" id="collect" name="collect" required><br>
                <label for="contact">Contact Information:</label>
                <input type="text" id="contact" name="contact" required><br>
                <button type="submit">Post</button>
            </form>
        </div>
    </div>

    <div class="items-container">
        {% for item in items %}
        <div class="item-card">
            {% if item.get("image_url") %}
            <img src="{{ url_for('static', filename=item.get('image_url')) }}" class="item-image" alt="Item image">
            {% endif %}
            <p><strong>Found at:</strong> {{ item.place_found }}</p>
            <p><strong>Collect at:</strong> {{ item.collect }}</p>
            <p><strong>Contact:</strong> {{ item.contact }}</p>
        </div>
        {% endfor %}
    </div>
    <a href="/main_page">Back to Main Page</a>

    <!-- JavaScript to control modal -->
    <script>
        function showLostFoundModal() {
            document.getElementById('postLostFoundModal').style.display = 'block';
        }
        function hideLostFoundModal() {
            document.getElementById('postLostFoundModal').style.display = 'none';
        }
        // Close modal when clicking outside the content
        document.getElementById('postLostFoundModal').addEventListener('click', function (event) {
            if (event.target === this) {
                hideLostFoundModal();
            }
        });
    </script>

    <!-- Cloudflare script from lost_and_found.html -->
    <script>(function () { function c() { var b = a.contentDocument || a.contentWindow.document; if (b) { var d = b.createElement('script'); d.innerHTML = "window.__CF$cv$params={r:'92f9526ae9bcdd1c',t:'MTc0NDUzMDA5NS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);"; b.getElementsByTagName('head')[0].appendChild(d) } } if (document.body) { var a = document.createElement('iframe'); a.height = 1; a.width = 1; a.style.position = 'absolute'; a.style.top = 0; a.style.left = 0; a.style.border = 'none'; a.style.visibility = 'hidden'; document.body.appendChild(a); if ('loading' !== document.readyState) c(); else if (window.addEventListener) document.addEventListener('DOMContentLoaded', c); else { var e = document.onreadystatechange || function () { }; document.onreadystatechange = function (b) { e(b); 'loading' !== document.readyState && (document.onreadystatechange = e, c()) } } } })();</script>
</body>

</html>